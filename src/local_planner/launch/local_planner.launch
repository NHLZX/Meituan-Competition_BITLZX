<launch>

  <arg name="sensorOffsetX" default="0"/>
  <arg name="sensorOffsetY" default="0"/>
  <arg name="maxSpeed" default="1.0"/>
  <arg name="autonomySpeed" default="1.0"/>

  <node pkg="local_planner" type="localPlanner" name="localPlanner" output="screen" required="true" />

  <node pkg="local_planner" type="pathFollower" name="pathFollower" output="screen" required="true">
    <param name="sensorOffsetX" value="$(arg sensorOffsetX)" />
    <param name="sensorOffsetY" value="$(arg sensorOffsetY)" />
    <param name="pubSkipNum" type="int" value="1" />
    <param name="lookAheadDis" type="double" value="0.5" />
    <param name="yawRateGain" type="double" value="7.5" />
    <param name="stopYawRateGain" type="double" value="7.5" />
    <param name="maxYawRate" type="double" value="45.0" />
    <param name="maxSpeed" value="$(arg maxSpeed)" />
    <param name="maxAccel" type="double" value="1.0" />
    <param name="switchTimeThre" type="double" value="1.0" />
    <param name="dirDiffThre" type="double" value="0.1" />
    <param name="stopDisThre" type="double" value="0.2" />
    <param name="slowDwnDisThre" type="double" value="1.0" />
    <param name="useInclRateToSlow" type="bool" value="false" />
    <param name="inclRateThre" type="double" value="120.0" />
    <param name="slowRate1" type="double" value="0.25" />
    <param name="slowRate2" type="double" value="0.5" />
    <param name="slowTime1" type="double" value="2.0" />
    <param name="slowTime2" type="double" value="2.0" />
    <param name="useInclToStop" type="bool" value="false" />
    <param name="inclThre" type="double" value="45.0" />
    <param name="stopTime" type="double" value="5.0" />
    <param name="noRotAtStop" type="bool" value="false" />
    <param name="noRotAtGoal" type="bool" value="true" />
    <param name="autonomySpeed" value="$(arg autonomySpeed)" />
  </node>

  <node pkg="local_planner" type="localCostMap" name="localCostMap" output="screen" />
  <node pkg="local_planner" type="pointcloud_filter_node" name="pointcloud_filter_node" output="screen" />

  <node pkg="local_planner" type="dwaPlanner" name="dwaPlanner" output="screen">


    <!-- 加载参数文件 -->
    <rosparam command="load" file="$(find local_planner)/config/dwa_params.yaml"/>
    
  </node>
  <!-- 剩余yolo识别节点 -->
  <node pkg="local_planner" type="goalAdv" name="goalAdv" output="screen" />
  <node pkg="local_planner" type="state_machine" name="state_machine" output="screen" launch-prefix="bash -c 'sleep 3; $0 $@'"/> 

  <node pkg="tf" type="static_transform_publisher" name="vehicleTransPublisher" args="-$(arg sensorOffsetX) -$(arg sensorOffsetY) 0 0 0 0 /sensor /vehicle 1000"/>

</launch>

